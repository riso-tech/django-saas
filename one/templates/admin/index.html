{% extends "admin/base_site.html" %}
{% load i18n grp_tags log %}

{% if not is_popup %}
  {% block breadcrumbs %}
    {% if title %}
      <!--begin::Item-->
      <li class="breadcrumb-item">
        <i class="ki-duotone ki-right fs-4 text-gray-700 mx-n1"></i></li>
      <!--end::Item-->
      <!--begin::Item-->
      <li class="breadcrumb-item text-gray-500">
        {{ title }}
      </li>
      <!--end::Item-->
    {% endif %}
  {% endblock breadcrumbs %}
{% endif %}

{% block content_title %}
  {% if title %}{{ title }}{% endif %}
{% endblock content_title %}

{% block admin_title %}
  <h1 id="grp-admin-title">
    {% trans "Django administration" as vanilla_site_header %}
    {% if site_header and site_header != vanilla_site_header %}
      {{ site_header|safe }}
    {% elif grappelli_admin_title %}
      {{ grappelli_admin_title }}
    {% else %}
      {% get_admin_title %}
    {% endif %}
  </h1>
{% endblock admin_title %}

{% block content %}
  <div class="g-d-c">
    <div class="g-d-12 g-d-f">
      {% for app in app_list %}
        <div class="grp-module" id="app_{{ app.name|lower }}">
          <h2><a href="{{ app.app_url }}" class="grp-section">{% trans app.name %}</a></h2>
          {% for model in app.models %}
            <div class="grp-row" id="model-{{ model.object_name|lower }}">
              {% if model.admin_url %}
                <a href="{{ model.admin_url }}"><strong>{{ model.name }}</strong></a>
              {% else %}
                <strong>{{ model.name }}</strong>
              {% endif %}
              {% if model.add_url %}
                <ul class="grp-actions">
                  <li class="grp-icon grp-add-link">
                    <a href="{{ model.add_url }}" title="{% trans "Add" %}">&nbsp;</a>
                  </li>
                </ul>
              {% endif %}
            </div>
          {% endfor %}
        </div>
      {% empty %}
        <p>{% trans "You donÂ´t have permission to edit anything." %}</p>
      {% endfor %}
      {% block custom_views %}
        {% if custom_list %}
          <div class="grp-module" id="custom_views">
            <h2>{% trans 'Custom Views' %}</h2>
            {% for path, name in custom_list %}
              <div class="grp-row">
                <a href="{{ path }}"><strong>{{ name }}</strong></a>
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endblock %}
    </div>
    <div class="g-d-6 g-d-l">
      <div class="grp-module" id="grp-recent-actions-module">
        <h2>{% trans 'Recent actions' %}</h2>
        <div class="grp-module">
          <h3>{% trans 'My actions' %}</h3>
          {% get_admin_log 10 as admin_log for_user user %}
          {% if not admin_log %}
            <div class="grp-row"><p>{% trans 'None available' %}</p></div>
          {% else %}
            <ul class="grp-listing-small">
              {% for entry in admin_log %}
                <li
                  class="grp-row{% if entry.is_addition %} grp-add-link{% endif %}{% if entry.is_change %} grp-change-link{% endif %}{% if entry.is_deletion %} grp-delete-link{% endif %}">
                  {% if entry.is_deletion %}
                    <span>{{ entry.object_repr }}</span>
                  {% else %}
                    <a href="{{ entry.get_admin_url }}">{{ entry.object_repr }}</a>
                  {% endif %}
                  <span class="grp-font-color-quiet">{% filter capfirst %}
                    {% trans entry.content_type.name %}{% endfilter %}</span>
                </li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% endblock %}
