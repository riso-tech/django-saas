{% extends "account/base.html" %}

{% load i18n %}

{% block head_title %}
  {% translate "Change Password" %}
{% endblock head_title %}

{% block inner %}
<div class="d-flex flex-center flex-column flex-column-fluid">
    <!--begin::Wrapper-->
    <div class="w-lg-500px p-10 p-lg-15 mx-auto">
      <!--begin::Form-->
      <form class="form w-100"
        {% if not token_fail and form %}
            method="post" action="."
        {% endif %}
      >
        {% csrf_token %}
        <!--begin::Heading-->
        <div class="text-center mb-10">
          <!--begin::Title-->
          <h1 class="text-dark mb-3">
            {% if token_fail %}
              {% translate "Bad Token" %}
            {% else %}
              {% translate "Change Password" %}
            {% endif %}
          </h1>
          <!--end::Title-->
          <!--begin::Link-->
          {% if token_fail %}
            <div class="text-gray-400 fw-semibold fs-4">
              {% url 'account_reset_password' as passwd_reset_url %}
              {% blocktranslate %}The password reset link was invalid, possibly because it has already been used.
                Please request a <a href="{{ passwd_reset_url }}">new password reset</a>.{% endblocktranslate %}
            </div>
          {% else %}
            <div class="text-gray-400 fw-semibold fs-4">
              {% translate "Your password is now changed." %}
            </div>
          {% endif %}
          <!--end::Link-->
        </div>
        <!--begin::Heading-->

        {% if not token_fail and form %}
          {{ form }}
          <!--begin::Input group-->
          <div class="fv-row mb-10">
            <!--begin::Label-->
            <label class="form-label fs-6 fw-bold text-dark">Email</label>
            <!--end::Label-->
            <!--begin::Input-->
            <input class="form-control form-control-lg form-control-solid" type="text" name="email" autocomplete="off"/>
            <!--end::Input-->
          </div>
          <!--end::Input group-->
          <!--begin::Actions-->
          <div class="text-center">
            <!--begin::Submit button-->
            <button type="submit" id="kt_sign_in_submit" class="btn btn-lg btn-primary w-100 mb-5">
              <span class="indicator-label">{% translate "Sign Out" %}</span>
              <span class="indicator-progress">{% translate "Please wait" %}...
              <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
            </span>
            </button>
            <!--end::Submit button-->
          </div>
          <!--end::Actions-->
        {% endif %}
      </form>
      <!--end::Form-->
    </div>
    <!--end::Wrapper-->
  </div>
{% endblock inner %}
