{% extends "account/base.html" %}

{% load static i18n %}
{% load account socialaccount %}

{% block head_title %}
  {% translate "Sign In" %}
{% endblock head_title %}

{% block inner %}


  <div class="d-flex flex-center flex-column flex-column-fluid">
    <!--begin::Wrapper-->
    <div class="w-lg-500px p-10 p-lg-15 mx-auto">
      <!--begin::Form-->
      <form class="form w-100" novalidate="novalidate" id="kt_sign_in_form" method="post"
            action="{% url 'account_login' %}">
        {% csrf_token %}
        <!--begin::Heading-->
        <div class="text-center mb-10">
          <!--begin::Title-->
          <h1 class="text-dark mb-3">Sign In to {{ site_name }}</h1>
          <!--end::Title-->
          {% if ACCOUNT_ALLOW_REGISTRATION %}
            <!--begin::Link-->
            <div class="text-gray-400 fw-semibold fs-4">New Here?
              <a href="{{ signup_url }}" class="link-primary fw-bold">Create an Account</a>
            </div>
            <!--end::Link-->
          {% endif %}
        </div>
        <!--begin::Heading-->

        <!--begin::Input group-->
        {% if redirect_field_value %}
          <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}"/>
        {% endif %}
        <!--end::Input group-->

        {#        {{ form }}#}

        <!--begin::Input group-->
        <div class="fv-row mb-10">
          <!--begin::Label-->
          <label class="form-label fs-6 fw-bold text-dark">Email</label>
          <!--end::Label-->
          <!--begin::Input-->
          <input class="form-control form-control-lg form-control-solid" type="text" name="email" autocomplete="off"/>
          <!--end::Input-->
        </div>
        <!--end::Input group-->
        <!--begin::Input group-->
        <div class="fv-row mb-10">
          <!--begin::Wrapper-->
          <div class="d-flex flex-stack mb-2">
            <!--begin::Label-->
            <label class="form-label fw-bold text-dark fs-6 mb-0">Password</label>
            <!--end::Label-->
            <!--begin::Link-->
            <a href="{% url 'account_reset_password' %}" class="link-primary fs-6 fw-bold">Forgot Password ?</a>
            <!--end::Link-->
          </div>
          <!--end::Wrapper-->
          <!--begin::Input-->
          <input class="form-control form-control-lg form-control-solid" type="password" name="password"
                 autocomplete="off"/>
          <!--end::Input-->
        </div>
        <!--end::Input group-->

        <!--begin::Actions-->
        <div class="text-center">
          <!--begin::Submit button-->
          <button type="submit" id="kt_sign_in_submit" class="btn btn-lg btn-primary w-100 mb-5">
            <span class="indicator-label">Continue</span>
            <span class="indicator-progress">Please wait...
              <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
            </span>
          </button>
          <!--end::Submit button-->

          {% get_providers as socialaccount_providers %}
          {% if socialaccount_providers %}
            {#            <div class="socialaccount_ballot">#}
            {#              <ul class="socialaccount_providers">#}
            {#                {% include "socialaccount/snippets/provider_list.html" with process="login" %}#}
            {#              </ul>#}
            {#              <div class="login-or">{% translate "or" %}</div>#}
            {#            </div>#}
            {#            {% include "socialaccount/snippets/login_extra.html" %}#}

            <!--begin::Separator-->
            <div class="text-center text-muted text-uppercase fw-bold mb-5">or</div>
            <!--end::Separator-->
            <!--begin::Google link-->
            <a href="#" class="btn btn-flex flex-center btn-light btn-lg w-100 mb-5">
              <img alt="Logo" src="{% static 'media/svg/brand-logos/google-icon.svg' %}" class="h-20px me-3"/>
              Continue with Google
            </a>
            <!--end::Google link-->
            <!--begin::Google link-->
            <a href="#" class="btn btn-flex flex-center btn-light btn-lg w-100 mb-5">
              <img alt="Logo" src="{% static 'media/svg/brand-logos/facebook-4.svg' %}" class="h-20px me-3"/>
              Continue with Facebook
            </a>
            <!--end::Google link-->
            <!--begin::Google link-->
            <a href="#" class="btn btn-flex flex-center btn-light btn-lg w-100">
              <img alt="Logo" src="{% static 'media/svg/brand-logos/apple-black.svg' %}"
                   class="theme-light-show h-20px me-3"/>
              <img alt="Logo" src="{% static 'media/svg/brand-logos/apple-black-dark.svg' %}"
                   class="theme-dark-show h-20px me-3"/>Continue with Apple</a>
            <!--end::Google link-->
          {% endif %}
        </div>
        <!--end::Actions-->
      </form>
      <!--end::Form-->
    </div>
    <!--end::Wrapper-->
  </div>

{% endblock inner %}

{% block inline_javascript %}
  <script>
    let form;
    let validator;
    let initValidation = function () {
      form = document.querySelector('#kt_sign_in_form');
      validator = FormValidation.formValidation(
        form,
        {
          fields: {
            'email': {
              validators: {
                regexp: {
                  regexp: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
                  message: 'The value is not a valid email address',
                },
                notEmpty: {
                  message: 'Email address is required'
                }
              }
            },
            'password': {
              validators: {
                notEmpty: {
                  message: 'The password is required'
                }
              }
            }
          },
          plugins: {
            trigger: new FormValidation.plugins.Trigger(),
            bootstrap: new FormValidation.plugins.Bootstrap5({
              rowSelector: '.fv-row',
              eleInvalidClass: '',  // comment to enable invalid state icons
              eleValidClass: '' // comment to enable valid state icons
            })
          }
        }
      );
      $(form.querySelector('[name="email"]')).on('change', function () {
        validator.revalidateField('email');
      });
    }
    initValidation();
  </script>
{% endblock inline_javascript %}
