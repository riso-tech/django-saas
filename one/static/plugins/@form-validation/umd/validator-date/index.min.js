/**
 * FormValidation (https://formvalidation.io)
 * The best validation library for JavaScript
 * (c) 2013 - 2023 Nguyen Huu Phuoc <me@phuoc.ng>
 *
 * @license https://formvalidation.io/license
 * @package @form-validation/validator-date
 * @version 2.0.2
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@form-validation/core")):"function"==typeof define&&define.amd?define(["@form-validation/core"],t):((e="undefined"!=typeof globalThis?globalThis:e||self).FormValidation=e.FormValidation||{},e.FormValidation.validators=e.FormValidation.validators||{},e.FormValidation.validators.date=t(e.FormValidation))}(this,(function(e){"use strict";var t=e.utils.format,n=e.utils.isValidDate;return function(){var e=function(e,t,n){var a=t.indexOf("YYYY"),r=t.indexOf("MM"),i=t.indexOf("DD");if(-1===a||-1===r||-1===i)return null;var l=e.split(" "),s=l[0].split(n);if(s.length<3)return null;var o=new Date(parseInt(s[a],10),parseInt(s[r],10)-1,parseInt(s[i],10));if(l.length>1){var c=l[1].split(":");o.setHours(c.length>0?parseInt(c[0],10):0),o.setMinutes(c.length>1?parseInt(c[1],10):0),o.setSeconds(c.length>2?parseInt(c[2],10):0)}return o},a=function(e,t){var n=t.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss"),a=e.getDate(),r=a<10?"0".concat(a):a,i=e.getMonth()+1,l=i<10?"0".concat(i):i,s="".concat(e.getFullYear()).substr(2),o=e.getFullYear(),c=e.getHours()%12||12,d=c<10?"0".concat(c):c,u=e.getHours(),f=u<10?"0".concat(u):u,g=e.getMinutes(),m=g<10?"0".concat(g):g,p=e.getSeconds(),h=p<10?"0".concat(p):p,v={H:"".concat(u),HH:"".concat(f),M:"".concat(g),MM:"".concat(m),d:"".concat(a),dd:"".concat(r),h:"".concat(c),hh:"".concat(d),m:"".concat(i),mm:"".concat(l),s:"".concat(p),ss:"".concat(h),yy:"".concat(s),yyyy:"".concat(o)};return n.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,(function(e){return v[e]?v[e]:e.slice(1,e.length-1)}))};return{validate:function(r){if(""===r.value)return{meta:{date:null},valid:!0};var i=Object.assign({},{format:r.element&&"date"===r.element.getAttribute("type")?"YYYY-MM-DD":"MM/DD/YYYY",message:""},r.options),l=r.l10n?r.l10n.date.default:i.message,s={message:"".concat(l),meta:{date:null},valid:!1},o=i.format.split(" "),c=o.length>1?o[1]:null,d=o.length>2?o[2]:null,u=r.value.split(" "),f=u[0],g=u.length>1?u[1]:null;if(o.length!==u.length)return s;var m=i.separator||(-1!==f.indexOf("/")?"/":-1!==f.indexOf("-")?"-":-1!==f.indexOf(".")?".":"/");if(null===m||-1===f.indexOf(m))return s;var p=f.split(m),h=o[0].split(m);if(p.length!==h.length)return s;var v=p[h.indexOf("YYYY")],M=p[h.indexOf("MM")],Y=p[h.indexOf("DD")];if(!/^\d+$/.test(v)||!/^\d+$/.test(M)||!/^\d+$/.test(Y)||v.length>4||M.length>2||Y.length>2)return s;var y=parseInt(v,10),D=parseInt(M,10),x=parseInt(Y,10);if(!n(y,D,x))return s;var I=new Date(y,D-1,x);if(c){var O=g.split(":");if(c.split(":").length!==O.length)return s;var T=O.length>0?O[0].length<=2&&/^\d+$/.test(O[0])?parseInt(O[0],10):-1:0,F=O.length>1?O[1].length<=2&&/^\d+$/.test(O[1])?parseInt(O[1],10):-1:0,H=O.length>2?O[2].length<=2&&/^\d+$/.test(O[2])?parseInt(O[2],10):-1:0;if(-1===T||-1===F||-1===H)return s;if(H<0||H>60)return s;if(T<0||T>=24||d&&T>12)return s;if(F<0||F>59)return s;I.setHours(T),I.setMinutes(F),I.setSeconds(H)}var V="function"==typeof i.min?i.min():i.min,b=V instanceof Date?V:V?e(V,h,m):I,S="function"==typeof i.max?i.max():i.max,$=S instanceof Date?S:S?e(S,h,m):I,w=V instanceof Date?a(b,i.format):V,j=S instanceof Date?a($,i.format):S;switch(!0){case!!w&&!j:return{message:t(r.l10n?r.l10n.date.min:l,w),meta:{date:I},valid:I.getTime()>=b.getTime()};case!!j&&!w:return{message:t(r.l10n?r.l10n.date.max:l,j),meta:{date:I},valid:I.getTime()<=$.getTime()};case!!j&&!!w:return{message:t(r.l10n?r.l10n.date.range:l,[w,j]),meta:{date:I},valid:I.getTime()<=$.getTime()&&I.getTime()>=b.getTime()};default:return{message:"".concat(l),meta:{date:I},valid:!0}}}}}}));
