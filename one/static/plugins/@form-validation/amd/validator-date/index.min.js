/**
 * FormValidation (https://formvalidation.io)
 * The best validation library for JavaScript
 * (c) 2013 - 2023 Nguyen Huu Phuoc <me@phuoc.ng>
 *
 * @license https://formvalidation.io/license
 * @package @form-validation/validator-date
 * @version 2.0.2
 */

define(["exports","@form-validation/core"],(function(e,t){"use strict";var n=t.utils.format,a=t.utils.isValidDate;e.date=function(){var e=function(e,t,n){var a=t.indexOf("YYYY"),r=t.indexOf("MM"),l=t.indexOf("DD");if(-1===a||-1===r||-1===l)return null;var s=e.split(" "),i=s[0].split(n);if(i.length<3)return null;var c=new Date(parseInt(i[a],10),parseInt(i[r],10)-1,parseInt(i[l],10));if(s.length>1){var o=s[1].split(":");c.setHours(o.length>0?parseInt(o[0],10):0),c.setMinutes(o.length>1?parseInt(o[1],10):0),c.setSeconds(o.length>2?parseInt(o[2],10):0)}return c},t=function(e,t){var n=t.replace(/Y/g,"y").replace(/M/g,"m").replace(/D/g,"d").replace(/:m/g,":M").replace(/:mm/g,":MM").replace(/:S/,":s").replace(/:SS/,":ss"),a=e.getDate(),r=a<10?"0".concat(a):a,l=e.getMonth()+1,s=l<10?"0".concat(l):l,i="".concat(e.getFullYear()).substr(2),c=e.getFullYear(),o=e.getHours()%12||12,g=o<10?"0".concat(o):o,u=e.getHours(),d=u<10?"0".concat(u):u,f=e.getMinutes(),m=f<10?"0".concat(f):f,p=e.getSeconds(),h=p<10?"0".concat(p):p,v={H:"".concat(u),HH:"".concat(d),M:"".concat(f),MM:"".concat(m),d:"".concat(a),dd:"".concat(r),h:"".concat(o),hh:"".concat(g),m:"".concat(l),mm:"".concat(s),s:"".concat(p),ss:"".concat(h),yy:"".concat(i),yyyy:"".concat(c)};return n.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMs])\1?|"[^"]*"|'[^']*'/g,(function(e){return v[e]?v[e]:e.slice(1,e.length-1)}))};return{validate:function(r){if(""===r.value)return{meta:{date:null},valid:!0};var l=Object.assign({},{format:r.element&&"date"===r.element.getAttribute("type")?"YYYY-MM-DD":"MM/DD/YYYY",message:""},r.options),s=r.l10n?r.l10n.date.default:l.message,i={message:"".concat(s),meta:{date:null},valid:!1},c=l.format.split(" "),o=c.length>1?c[1]:null,g=c.length>2?c[2]:null,u=r.value.split(" "),d=u[0],f=u.length>1?u[1]:null;if(c.length!==u.length)return i;var m=l.separator||(-1!==d.indexOf("/")?"/":-1!==d.indexOf("-")?"-":-1!==d.indexOf(".")?".":"/");if(null===m||-1===d.indexOf(m))return i;var p=d.split(m),h=c[0].split(m);if(p.length!==h.length)return i;var v=p[h.indexOf("YYYY")],M=p[h.indexOf("MM")],Y=p[h.indexOf("DD")];if(!/^\d+$/.test(v)||!/^\d+$/.test(M)||!/^\d+$/.test(Y)||v.length>4||M.length>2||Y.length>2)return i;var D=parseInt(v,10),x=parseInt(M,10),y=parseInt(Y,10);if(!a(D,x,y))return i;var I=new Date(D,x-1,y);if(o){var O=f.split(":");if(o.split(":").length!==O.length)return i;var H=O.length>0?O[0].length<=2&&/^\d+$/.test(O[0])?parseInt(O[0],10):-1:0,T=O.length>1?O[1].length<=2&&/^\d+$/.test(O[1])?parseInt(O[1],10):-1:0,S=O.length>2?O[2].length<=2&&/^\d+$/.test(O[2])?parseInt(O[2],10):-1:0;if(-1===H||-1===T||-1===S)return i;if(S<0||S>60)return i;if(H<0||H>=24||g&&H>12)return i;if(T<0||T>59)return i;I.setHours(H),I.setMinutes(T),I.setSeconds(S)}var $="function"==typeof l.min?l.min():l.min,b=$ instanceof Date?$:$?e($,h,m):I,w="function"==typeof l.max?l.max():l.max,F=w instanceof Date?w:w?e(w,h,m):I,j=$ instanceof Date?t(b,l.format):$,A=w instanceof Date?t(F,l.format):w;switch(!0){case!!j&&!A:return{message:n(r.l10n?r.l10n.date.min:s,j),meta:{date:I},valid:I.getTime()>=b.getTime()};case!!A&&!j:return{message:n(r.l10n?r.l10n.date.max:s,A),meta:{date:I},valid:I.getTime()<=F.getTime()};case!!A&&!!j:return{message:n(r.l10n?r.l10n.date.range:s,[j,A]),meta:{date:I},valid:I.getTime()<=F.getTime()&&I.getTime()>=b.getTime()};default:return{message:"".concat(s),meta:{date:I},valid:!0}}}}}}));
