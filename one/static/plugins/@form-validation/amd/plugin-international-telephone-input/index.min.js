/**
 * FormValidation (https://formvalidation.io)
 * The best validation library for JavaScript
 * (c) 2013 - 2023 Nguyen Huu Phuoc <me@phuoc.ng>
 *
 * @license https://formvalidation.io/license
 * @package @form-validation/plugin-international-telephone-input
 * @version 2.0.2
 */

define(["exports","@form-validation/core"],(function(t,e){"use strict";var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},n(t,e)};var r=function(t){function e(e){var n=t.call(this,e)||this;return n.intlTelInstances=new Map,n.countryChangeHandler=new Map,n.fieldElements=new Map,n.opts=Object.assign({},{autoPlaceholder:"polite",utilsScript:""},e),n.validatePhoneNumber=n.checkPhoneNumber.bind(n),n.fields="string"==typeof n.opts.field?n.opts.field.split(","):n.opts.field,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.install=function(){var t=this;this.core.registerValidator(e.INT_TEL_VALIDATOR,this.validatePhoneNumber),this.fields.forEach((function(n){var r;t.core.addField(n,{validators:(r={},r[e.INT_TEL_VALIDATOR]={message:t.opts.message},r)});var o=t.core.getElements(n)[0],i=function(){return t.core.revalidateField(n)};o.addEventListener("countrychange",i),t.countryChangeHandler.set(n,i),t.fieldElements.set(n,o),t.intlTelInstances.set(n,intlTelInput(o,t.opts))}))},e.prototype.uninstall=function(){var t=this;this.fields.forEach((function(n){var r=t.countryChangeHandler.get(n),o=t.fieldElements.get(n),i=t.getIntTelInstance(n);r&&o&&i&&(o.removeEventListener("countrychange",r),t.core.disableValidator(n,e.INT_TEL_VALIDATOR),i.destroy())}))},e.prototype.getIntTelInstance=function(t){return this.intlTelInstances.get(t)},e.prototype.checkPhoneNumber=function(){var t=this;return{validate:function(e){var n=e.value,r=t.getIntTelInstance(e.field);return""!==n&&r?{valid:r.isValidNumber()}:{valid:!0}}}},e.INT_TEL_VALIDATOR="___InternationalTelephoneInputValidator",e}(e.Plugin);t.InternationalTelephoneInput=r}));
